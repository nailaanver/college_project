{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- FontAwesome for icons -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<style>
:root {
    --navy-dark: #0b1c39;
    --navy: #142850;
    --gold: #f3c623;
    --gold-soft: #f8d85a;
    --white: #ffffff;
    --text-light: #f5f5f5;
    --gray: #d1d5db;
}

/* Full page background */
.books-page {
    min-height: 100vh;
    background: linear-gradient(rgba(11,28,57,0.9), rgba(11,28,57,0.9)),
                url("{% static 'images/campus.jpg' %}") center/cover no-repeat;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    font-family: 'Poppins', sans-serif;
}

/* Card wrapper */
.books-wrapper {
    max-width: 1200px;
    width: 100%;
    background: var(--white);
    padding: 40px 35px;
    border-radius: 28px;
    box-shadow: 0 25px 60px rgba(0,0,0,0.4);
    color: var(--white);
}

/* Page Title */
.page-title {
    font-size: 28px;
    font-weight: 700;
    color: var(--gold);
    margin-bottom: 25px;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Buttons */
.add-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--gold);
    color: var(--navy-dark);
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: 600;
    text-decoration: none;
    margin-right: 12px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
}

.add-btn:hover {
    background: var(--gold-soft);
}

/* Table */
.table-container {
    overflow-x: auto;
    border-radius: 20px;
    background: rgba(255,255,255,0.1);
    padding: 20px;
}

.table {
    width: 100%;
    border-collapse: collapse;
    color: var(--navy-dark);
}

.table th, .table td {
    padding: 14px;
    text-align: left;
    white-space: nowrap;
}

.table th {
    background: var(--navy);
    color: var(--white);
    font-weight: 600;
}

.table tr:nth-child(even) {
    background: rgba(255,255,255,0.05);
}

/* Status Badges */
.badge {
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 13px;
    font-weight: 500;
}

.badge-available {
    background: #28a745;
    color: #fff;
}

.badge-unavailable {
    background: #dc3545;
    color: #fff;
}

/* Action buttons */
.action-btn {
    text-decoration: none;
    margin-right: 8px;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.edit {
    color: #0d6efd;
}

.delete {
    color: #dc3545;
}

.table a:hover {
    opacity: 0.8;
}
</style>

<div class="books-page">
    <div class="books-wrapper">

        <h2 class="page-title">
            <i class="fas fa-book"></i> Manage Books
        </h2>

        <!-- Buttons -->
        <a href="{% url 'library-menu' %}" class="add-btn">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
        <a href="{% url 'book-add' %}" class="add-btn">
            <i class="fas fa-plus-circle"></i> Add Book
        </a>

        <!-- Table -->
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Author</th>
                        <th>ISBN</th>
                        <th>Category</th>
                        <th>Total</th>
                        <th>Available</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>

                <tbody>
                {% for book in books %}
                    <tr>
                        <td>{{ book.title }}</td>
                        <td>{{ book.author }}</td>
                        <td>{{ book.isbn }}</td>
                        <td>{{ book.category }}</td>
                        <td>{{ book.total_copies }}</td>
                        <td>{{ book.available_copies }}</td>
                        <td>
                            {% if book.available_copies > 0 %}
                                <span class="badge badge-available">Available</span>
                            {% else %}
                                <span class="badge badge-unavailable">Out</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'book-edit' book.id %}" class="action-btn edit">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{% url 'book-delete' book.id %}" class="action-btn delete">
                                <i class="fas fa-trash-alt"></i> Delete
                            </a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="8" style="text-align:center;">No books available</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</div>

{% endblock %}
